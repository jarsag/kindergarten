{% extends 'base.html' %}

{% block title %}–î–æ–±–∞–≤–∏—Ç—å –∑–∞–ø–∏—Å—å –≤ –¥–Ω–µ–≤–Ω–∏–∫{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="row justify-content-center">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h3 class="mb-0">
                        <i class="fas fa-plus-circle"></i> –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å –≤ –¥–Ω–µ–≤–Ω–∏–∫–µ
                    </h3>
                </div>
                <div class="card-body">
                    <div class="alert alert-info mb-4">
                        <h5><i class="fas fa-child"></i> {{ child.first_name }} {{ child.last_name }}</h5>
                        <p class="mb-0">–í–æ–∑—Ä–∞—Å—Ç: {{ child.age }} –ª–µ—Ç | –ì—Ä—É–ø–ø–∞: {{ child.group|default:"–ù–µ —É–∫–∞–∑–∞–Ω–∞" }}</p>
                    </div>
                    
                    <form method="post">
                        {% csrf_token %}
                        
                        <!-- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0"><i class="fas fa-smile"></i> –ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="id_mood" class="form-label">–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ä–µ–±–µ–Ω–∫–∞ *</label>
                                    <select name="mood" id="id_mood" class="form-control" required>
                                        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ...</option>
                                        <option value="excellent">üòä –û—Ç–ª–∏—á–Ω–æ–µ</option>
                                        <option value="good">üôÇ –•–æ—Ä–æ—à–µ–µ</option>
                                        <option value="normal">üòê –û–±—ã—á–Ω–æ–µ</option>
                                        <option value="bad">üòî –ü–ª–æ—Ö–æ–µ</option>
                                        <option value="sick">ü§í –ë–æ–ª–µ–µ—Ç</option>
                                    </select>
                                </div>
                                
                                <div class="row">
                                    <div class="col-md-4 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="ate_well" id="id_ate_well" checked>
                                            <label class="form-check-label" for="id_ate_well">
                                                <i class="fas fa-utensils text-success"></i> –•–æ—Ä–æ—à–æ –ø–æ–∫—É—à–∞–ª
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="slept_well" id="id_slept_well" checked>
                                            <label class="form-check-label" for="id_slept_well">
                                                <i class="fas fa-bed text-primary"></i> –•–æ—Ä–æ—à–æ —Å–ø–∞–ª
                                            </label>
                                        </div>
                                    </div>
                                    <div class="col-md-4 mb-3">
                                        <div class="form-check">
                                            <input class="form-check-input" type="checkbox" name="participated" id="id_participated" checked>
                                            <label class="form-check-label" for="id_participated">
                                                <i class="fas fa-child text-info"></i> –ê–∫—Ç–∏–≤–Ω–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0"><i class="fas fa-tasks"></i> –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="id_activities" class="form-label">–ß–µ–º –∑–∞–Ω–∏–º–∞–ª—Å—è —Å–µ–≥–æ–¥–Ω—è *</label>
                                    <textarea name="activities" id="id_activities" class="form-control" rows="3" 
                                              placeholder="–û–ø–∏—à–∏—Ç–µ –∑–∞–Ω—è—Ç–∏—è —Ä–µ–±–µ–Ω–∫–∞ –∑–∞ –¥–µ–Ω—å..." required></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="id_achievements" class="form-label">–î–æ—Å—Ç–∏–∂–µ–Ω–∏—è –∏ —É—Å–ø–µ—Ö–∏</label>
                                    <textarea name="achievements" id="id_achievements" class="form-control" rows="2" 
                                              placeholder="–ß—Ç–æ –Ω–æ–≤–æ–≥–æ —É–∑–Ω–∞–ª, —á–µ–º—É –Ω–∞—É—á–∏–ª—Å—è..."></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0"><i class="fas fa-heartbeat"></i> –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –Ω–∞–±–ª—é–¥–µ–Ω–∏—è</h5>
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="id_temperature" class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ (¬∞C)</label>
                                        <input type="number" name="temperature" id="id_temperature" 
                                               class="form-control" step="0.1" min="35" max="42"
                                               placeholder="36.6">
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="id_medicine_taken" class="form-label">–ü—Ä–∏–Ω—è—Ç—ã–µ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞</label>
                                        <input type="text" name="medicine_taken" id="id_medicine_taken" 
                                               class="form-control" placeholder="–ï—Å–ª–∏ –¥–∞–≤–∞–ª–∏ –ª–µ–∫–∞—Ä—Å—Ç–≤–∞">
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –ó–∞–º–µ—Ç–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ -->
                        <div class="card mb-4">
                            <div class="card-header bg-light">
                                <h5 class="mb-0"><i class="fas fa-sticky-note"></i> –ó–∞–º–µ—Ç–∫–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏</h5>
                            </div>
                            <div class="card-body">
                                <div class="mb-3">
                                    <label for="id_recommendations" class="form-label">–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ —Ä–æ–¥–∏—Ç–µ–ª—è–º</label>
                                    <textarea name="recommendations" id="id_recommendations" class="form-control" rows="2" 
                                              placeholder="–ß—Ç–æ –ø–æ—á–∏—Ç–∞—Ç—å, –≤–æ —á—Ç–æ –ø–æ–∏–≥—Ä–∞—Ç—å –¥–æ–º–∞..."></textarea>
                                </div>
                                
                                <div class="mb-3">
                                    <label for="id_teacher_notes" class="form-label">–ó–∞–º–µ—Ç–∫–∏ –≤–æ—Å–ø–∏—Ç–∞—Ç–µ–ª—è</label>
                                    <textarea name="teacher_notes" id="id_teacher_notes" class="form-control" rows="3" 
                                              placeholder="–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏, –Ω–∞–±–ª—é–¥–µ–Ω–∏—è..."></textarea>
                                </div>
                            </div>
                        </div>
                        
                        <!-- –ö–Ω–æ–ø–∫–∏ -->
                        <div class="d-flex justify-content-between">
                            <a href="{% url 'diary:child_diary' child.id %}" class="btn btn-secondary">
                                <i class="fas fa-arrow-left"></i> –û—Ç–º–µ–Ω–∞
                            </a>
                            <button type="submit" class="btn btn-primary">
                                <i class="fas fa-save"></i> –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .form-check-input:checked {
        background-color: #0d6efd;
        border-color: #0d6efd;
    }
    
    .card {
        border: 1px solid #dee2e6;
        border-radius: 0.5rem;
    }
    
    .card-header.bg-light {
        background-color: #f8f9fa !important;
    }
    
    input[type="number"]::-webkit-inner-spin-button,
    input[type="number"]::-webkit-outer-spin-button {
        opacity: 1;
    }
    
    textarea.form-control {
        resize: vertical;
    }
</style>

<script>
document.addEventListener('DOMContentLoaded', function() {
    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ–≥–æ–¥–Ω—è—à–Ω–µ–π –¥–∞—Ç—ã –≤ —Å–∫—Ä—ã—Ç–æ–º –ø–æ–ª–µ
    const today = new Date().toISOString().split('T')[0];
    
    // –ü–æ–¥—Å–∫–∞–∑–∫–∏ –¥–ª—è –ø–æ–ª–µ–π
    const activitiesField = document.getElementById('id_activities');
    activitiesField.addEventListener('focus', function() {
        if (!this.value) {
            this.placeholder = '–ü—Ä–∏–º–µ—Ä: –£—Ç—Ä–æ–º —Ä–∏—Å–æ–≤–∞–ª –∫—Ä–∞—Å–∫–∞–º–∏, –¥–Ω–µ–º –∏–≥—Ä–∞–ª –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä, –≤–µ—á–µ—Ä–æ–º —Å–ª—É—à–∞–ª —Å–∫–∞–∑–∫—É...';
        }
    });
    
    // –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä—ã
    const tempField = document.getElementById('id_temperature');
    tempField.addEventListener('blur', function() {
        const value = parseFloat(this.value);
        if (value && (value < 35 || value > 42)) {
            alert('–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –≤ –ø—Ä–µ–¥–µ–ª–∞—Ö 35-42¬∞C');
            this.focus();
        }
    });
});
</script>
{% endblock %}